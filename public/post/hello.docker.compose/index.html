<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>好久不见</title>
        <meta name="author">
        <meta name="description" content="好久不见">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.30.2" />
        <link href="http://domain.yqjdcyy.com/post/index.xml" rel="alternate" type="application/rss+xml" title="好久不见" />
        <link href="http://domain.yqjdcyy.com/post/index.xml" rel="feed" type="application/rss+xml" title="好久不见" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://domain.yqjdcyy.com/css/styles.css">
        <link rel="icon" href="http://domain.yqjdcyy.com/favicon.ico">
        <link rel="apple-touch-icon" href="http://domain.yqjdcyy.com/apple-touch-icon.png" />
        <link rel="stylesheet" href="http://domain.yqjdcyy.com/css/highlightjs/monokai.css">
        <script src="http://domain.yqjdcyy.com/js/vendor/modernizr-2.8.0.min.js"></script>
        
        <style>
        .site-header h2 .logo {
        background: url(http://domain.yqjdcyy.com/img/desk.jpg) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(http://domain.yqjdcyy.com/img/desk.jpg);
        }}
       .site-header {
         background: #2a373d url(http://domain.yqjdcyy.com/img/desk.jpg) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2></h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            <a class="btn home" href="http://domain.yqjdcyy.com/" title="">&laquo; </a>
            
<h1><a href="http://domain.yqjdcyy.com/post/hello.docker.compose/" title="Hello.Docker.Compose">Hello.Docker.Compose</a></h1>

<footer class="post-info"> <span class="post-meta"><time datetime="2018.06.20">2018.06.20</time>

    &middot; 
        
        <a href="http://domain.yqjdcyy.com/tags/%E6%95%B4%E7%90%86">整理</a>, 
        
        <a href="http://domain.yqjdcyy.com/tags/docker">docker</a>
        
    

</span>
</footer>

            

<p>[TOC]</p>

<h1 id="简介">简介</h1>

<ul>
<li>Compose

<ul>
<li>定义和运行多个 Docker 容器的应用</li>
</ul></li>
<li>Service

<ul>
<li>应用容器，包括若干运行相同镜像的容器实例</li>
</ul></li>
<li>Project

<ul>
<li>一组关联的应用容器组成的完整业务单元</li>
<li>于 <code>docker-compose.yml</code> 文件中定义</li>
</ul></li>
</ul>

<h1 id="安装">安装</h1>

<ul>
<li><p><code>pip install -U docker-compose</code></p>

<pre><code>Successfully installed backports.ssl-match-hostname-3.5.0.1 cached-property-1.4.3 certifi-2018.4.16 docker-3.3.0 docker-compose-1.21.2 docker-pycreds-0.3.0 dockerpty-0.4.1 docopt-0.6.2 enum34-1.1.6 functools32-3.2.3.post2 idna-2.6 ipaddress-1.0.22 jsonschema-2.6.0 requests-2.18.4 six-1.11.0 texttable-0.9.1 urllib3-1.22 websocket-client-0.48.0
</code></pre></li>

<li><p><code>docker-compose version</code></p>

<pre><code>/usr/lib/python2.7/site-packages/requests/__init__.py:80: RequestsDependencyWarning: urllib3 (1.22) or chardet (2.2.1) doesn't match a supported version!
RequestsDependencyWarning)
docker-compose version 1.21.2, build a133471
docker-py version: 3.3.0
CPython version: 2.7.5
OpenSSL version: OpenSSL 1.0.1e-fips 11 Feb 2013
</code></pre></li>
</ul>

<h1 id="使用">使用</h1>

<h2 id="示例">示例</h2>

<ul>
<li><p><code>docker-compose up -d</code></p>

<pre><code>/usr/lib/python2.7/site-packages/requests/__init__.py:80: RequestsDependencyWarning: urllib3 (1.22) or chardet (2.2.1) doesn't match a supported version!
RequestsDependencyWarning)
Starting server_redis_redis_1 ... done
Starting server_redis_server_1 ... done
</code></pre></li>

<li><p><code>docker container ls --all</code></p>

<pre><code>CONTAINER ID        IMAGE                 COMMAND                  CREATED              STATUS              PORTS                    NAMES
b533d0f273ec        server_redis_server   &quot;/bin/sh -c './serve…&quot;   About a minute ago   Up 21 seconds       0.0.0.0:8031-&gt;3000/tcp   server_redis_server_1
8b4b70a02f29        redis                 &quot;docker-entrypoint.s…&quot;   About a minute ago   Up 22 seconds       0.0.0.0:8030-&gt;6379/tcp   server_redis_redis_1
</code></pre>

<ul>
<li><code>docker-compose stop</code>
<code>
/usr/lib/python2.7/site-packages/requests/__init__.py:80: RequestsDependencyWarning: urllib3 (1.22) or chardet (2.2.1) doesn't match a supported version!
RequestsDependencyWarning)
Stopping server_redis_server_1 ... done
Stopping server_redis_redis_1  ... done
</code></li>
</ul></li>

<li><p><code>docker-compose rm</code></p>

<pre><code>/usr/lib/python2.7/site-packages/requests/__init__.py:80: RequestsDependencyWarning: urllib3 (1.22) or chardet (2.2.1) doesn't match a supported version!
RequestsDependencyWarning)
Going to remove server_redis_server_1, server_redis_redis_1
Are you sure? [yN] y
Removing server_redis_server_1 ... done
Removing server_redis_redis_1  ... done
</code></pre></li>
</ul>

<h1 id="指令">指令</h1>

<h2 id="docker-compose-f-arg-options-command-args">docker-compose [-f <arg>&hellip;] [options] [COMMAND] [ARGS&hellip;]</h2>

<ul>
<li>Options

<ul>
<li><code>-f, --file FILE</code>

<ul>
<li>指定配置文件，默认为 <code>docker-compose.yml</code></li>
</ul></li>
<li><code>-p, --project-name NAME</code>

<ul>
<li>指定项目名称，默认为目录名</li>
</ul></li>
<li><code>--project-directory PATH</code>

<ul>
<li>指定工具目录，默认于组件的目录</li>
</ul></li>
<li><code>--verbose</code>

<ul>
<li>显示更多输出</li>
</ul></li>
<li><code>--log-level LEVEL</code>

<ul>
<li>设置日志等级，可选项为 <code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, <code>CRITICAL</code></li>
</ul></li>
<li><code>--no-ansi</code>

<ul>
<li>不打印 <code>ANSI</code> 控制字符</li>
</ul></li>
<li><code>-v, --version</code>

<ul>
<li>打印版本信息</li>
</ul></li>
<li><code>-H, --host HOST</code>

<ul>
<li>实例连接的套接字</li>
</ul></li>
<li><code>--tls</code>

<ul>
<li>使用 <code>TLS</code></li>
</ul></li>
<li><code>--tlscacert CA_PATH</code>

<ul>
<li>仅通过 <code>CA</code> 信任签证</li>
</ul></li>
<li><code>--tlscert CLIENT_CERT_PATH</code>

<ul>
<li>指定 <code>TLS</code> 证书文件</li>
</ul></li>
<li><code>--tlskey TLS_KEY_PATH</code>

<ul>
<li>指定 <code>TLS</code> 键值文件</li>
</ul></li>
<li><code>--tlsverify</code>

<ul>
<li>使用 <code>TLS</code>并以此校验远程请求</li>
</ul></li>
<li><code>--skip-hostname-check</code>

<ul>
<li>不拿守护进程实例名与客户端证书中指定的名称进行校验</li>
</ul></li>
<li><code>--compatibility</code>

<ul>
<li>如果设置，则表示将转换 V3 文件中的部署值至非群集等价物</li>
</ul></li>
</ul></li>
<li>Commands

<ul>
<li><code>build</code>

<ul>
<li>[重新]构建服务</li>
</ul></li>
<li><code>bundle</code>

<ul>
<li>用组件生成 <code>Docker</code> 包</li>
</ul></li>
<li><code>config</code>

<ul>
<li>校验、查看组件</li>
</ul></li>
<li><code>create</code>

<ul>
<li>创建服务</li>
</ul></li>
<li><code>down</code>

<ul>
<li>停止并删除容器、网络、镜像和</li>
</ul></li>
<li><code>events</code>

<ul>
<li>从容器接收实时事件</li>
</ul></li>
<li><code>exec</code>

<ul>
<li>于运行的容器中执行指令</li>
</ul></li>
<li><code>help</code>

<ul>
<li>获取命名的帮助信息</li>
</ul></li>
<li><code>images</code>

<ul>
<li>展示所有镜像</li>
</ul></li>
<li><code>kill</code>

<ul>
<li>杀死容器</li>
</ul></li>
<li><code>logs</code>

<ul>
<li>显示容器输出</li>
</ul></li>
<li><code>pause</code>

<ul>
<li>暂停服务</li>
</ul></li>
<li><code>port</code>

<ul>
<li>展示指定端口绑定的开放端口</li>
</ul></li>
<li><code>ps</code>

<ul>
<li>展示容器列表</li>
</ul></li>
<li><code>pull</code>

<ul>
<li>拉取服务镜像</li>
</ul></li>
<li><code>push</code>

<ul>
<li>推送服务镜像</li>
</ul></li>
<li><code>restart</code>

<ul>
<li>重启服务</li>
</ul></li>
<li><code>rm</code>

<ul>
<li>移除已关闭的容器</li>
</ul></li>
<li><code>run</code>

<ul>
<li>执行一次性的命令</li>
</ul></li>
<li><code>scale</code>

<ul>
<li>设置服务中的容器数量</li>
</ul></li>
<li><code>start</code>

<ul>
<li>启动服务</li>
</ul></li>
<li><code>stop</code>

<ul>
<li>停止服务</li>
</ul></li>
<li><code>top</code>

<ul>
<li>显示运行中的进程</li>
</ul></li>
<li><code>unpause</code>

<ul>
<li>不停止服务</li>
</ul></li>
<li><code>up</code>

<ul>
<li>创建并启动服务</li>
</ul></li>
<li><code>version</code>

<ul>
<li>展示 <code>Docker-Compose</code> 版本信息</li>
</ul></li>
</ul></li>
</ul>

<h1 id="模板">模板</h1>

<h2 id="参考">参考</h2>

<ul>
<li><a href="https://yeasy.gitbooks.io/docker_practice/compose/compose_file.html#configs">Compose 模板文件</a></li>
</ul>

<h2 id="注意事项">注意事项</h2>

<ul>
<li>默认模板文件名为 <code>docker-compose.yml</code></li>
<li>每个服务都要经过 <code>image</code> 指定镜像或 <code>build</code> 等以自动构建镜像

<ul>
<li><code>build</code> 情况需要 <code>Dockerfile</code> 文件</li>
<li>其中 <code>Dockerfile</code> 中设置的选项，如<code>CMD</code>, <code>EXPOSE</code>, <code>VOLUME</code>, <code>ENV</code> 等会自动被获取</li>
</ul></li>
</ul>

<h1 id="参考-1">参考</h1>

<h2 id="project">Project</h2>

<ul>
<li><p><a href="https://github.com/yqjdcyy/Hello_Docker/tree/master/server_redis">Hello_Docker/server_redis</a></p>

<h2 id="compose">Compose</h2></li>

<li><p>官方</p>

<ul>
<li><a href="https://docs.docker.com/compose/">Docker Compose</a></li>
<li><a href="https://github.com/docker/docker.github.io">docker/docker.github.io</a></li>
<li><a href="https://github.com/docker/docker.github.io/tree/master/compose/compose-file">compose-file</a></li>
<li><a href="https://github.com/docker/docker.github.io/tree/master/compose/reference">reference</a>
<br /></li>
</ul></li>

<li><p>参考</p>

<ul>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html">Docker 微服务教程</a></li>
<li><a href="https://yeasy.gitbooks.io/docker_practice/compose/">Docker Compose 项目</a></li>

<li><p><a href="https://github.com/docker/compose">docker/compose</a></p>

<h2 id="python">Python</h2></li>
</ul></li>

<li><p><a href="http://docs.python-guide.org/en/latest/starting/install3/linux/">Installing Python 3 on Linux</a></p></li>

<li><p><a href="https://www.cnblogs.com/kimyeee/p/7250560.html">Linux安装python3.6</a></p></li>
</ul>

            <ul class="share-buttons">
    <li></li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fdomain.yqjdcyy.com%2fpost%2fhello.docker.compose%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Hello.Docker.Compose&amp;url=http%3a%2f%2fdomain.yqjdcyy.com%2fpost%2fhello.docker.compose%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=http%3a%2f%2fdomain.yqjdcyy.com%2fpost%2fhello.docker.compose%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fdomain.yqjdcyy.com%2fpost%2fhello.docker.compose%2f&title=Hello.Docker.Compose" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title=""></a>
    </li>
</ul>

        </article>
        
        <div class="comments">
            <h3></h3>
            <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yqjdcyy-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
        
    </main>
    <aside class="author">
  <img class="profile-image" src="http://domain.yqjdcyy.com/img/profile-image.png" alt="姚清居" />
  <p class="name"> 
  <strong>姚清居</strong></p>
  <p class="address">Earth</p>
  <p class="link"></p>
  <ul class="social">
    












<li><a href="//github.com/yqjdcyy" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="http://domain.yqjdcyy.com/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>

</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="http://domain.yqjdcyy.com/post/index.xml" title="RSS"></a>
        <p>&copy; 2018 &middot; Powered by <a href="http://www.domain.yqjdcyy.com">姚清居</a>.</p>
  </div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="http:\/\/domain.yqjdcyy.com\/js\/vendor\/jquery-1.11.0.min.js"><\/script>')</script>
<script src="http://domain.yqjdcyy.com/js/plugins.js"></script>




</body>
</html>

