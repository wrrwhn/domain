+++
date = "2017-11-16T22:07:46+08:00"
title = "代码整洁之道.程序员的职业素养"
draft = false
tags = ["阅读","编程思想"]
share = true
+++


[TOC]

# 代码整洁之道 - 程序员的职业素养

## 专业主义
### 为自身错误埋单
### 注重自测
- 要求自测基本完整覆盖
### 建议要求
- 设计模式
    + GOF* 24
    + POSA 中多数模式的实战
- 设计原则
    + 了解 SOLID 原则
    + 深刻理解组件设计原则
- 方法
    + XP
    + Scrum
    + 精益
    + 看板
    + 瀑布
    + 结构化分析
    + 结构化设计
- 实践
    + 测试驱动开发
    + 面向对象设计
    + 结构化编程
    + 持续集成
    + 结对编程
- 工作
    + UML 图
    + DFD 图
    + 结构图
    + Petri 网络图
    + 状态迁移图
    + 流程图
    + 决策图
### 站在 雇主/客户/产品 的角度

## 说“不”
### 拒绝说“试一试”
- 在上级眼里意味着你可以
- 另一方面，如果能完成，意味着之前有所保留，并未全然尽力
### 描述清楚实现的难度
### 认真理解说“是”的成本

## 说“是”
### 承诺用语
- 为自己的承诺负责
- 理解对方言语承诺的`成分`
- 坚守原则，避免放松代码追求

### 承诺无效
#### 关键词
- 需要|应当
    + 我们要把这个活干完
    + 有人应当负责去推动这件事
- 希望|但愿
    + 希望明天我能完成这件事
    + 但愿我有时间做这件事
- 让我们
    + 让我们回头见
#### 特点
- 表现事情不在自己掌控范围
- 不愿意承担个人责任

### 承诺
#### 关键词
- 我将在……之前……
#### 关键
- 只承诺自己能完全掌握的事情，并推进依赖项的进展
- 目标可能无法完成，仍需尽可能地接近和掌握情况
- 目标无法兑现，应尽早反馈，调整他人预期或协调资源


## 编码
### 前提
- 信心
- 出错感知

### 初始化
- 保证代码解决问题
- 保证注释、代码结构，以确保其它人可以阅读你的代码
- 避免疲劳、焦虑时书写代码
    + 优先通过休息，或尝试解决，保证代码时间状态的可控
- 避免进入流态区
    + 比如单纯复制、粘贴等导致重复劳动而无实际思考
- 接受不可控制中断，并通过其它方式控制
    + 结对编程
    + TDD
- 通过结对编程、休息（上厕所、洗澡）来解决阻塞
- 尝试「创造性输入」（音乐、小说、电影）来实现「创造性输出」
- 关注调试、调试时间
- 保持节奏，拒绝`盲目冲刺`
- 接受帮助，并积极帮助他人

## 测试驱动开发
### 关键词
- Kent beck
- TDD
### 法则
- 单元自测未实现前，不编写产品代码
- 单元自测失败、无法通过编译时，不再写测试代码
- 产品代码`恰好`让当前失败的单元测试通过即可

### 优势
- 确定性
- 缺陷注入率
- 勇气
    + 重构的勇气
- 文档
    + 测试单元即文档
- 设计
    + 代码开发前，先编写失败场景
    + 帮助隔离功能范围，避免耦合

### 局限
- 场合并非全然适用

## 练习
### 项目
- 编程柔道场
- 卡塔
- 瓦萨

### 开源


## 验收测试
### 过早精细化
- 不确定原则
- 预估焦虑
### 迟来的模糊性
- 开发前才会将需求具体化

### 验收测试
- 完成定义
    + 代码开发完成
    + 测试通过
    + QA和需求方认可
- 沟通
- 自动化测试
- 与测试开发人员协商
- 验收测试和单元测试
- 持续集成


## 测试策略
### QA 找不到任何错误
- 目标如上
- QA 也是团队的一部分，帮助进行需求定义和特性描述
### 自动化测试
- 单元测试
    - XUnit
    - 开发自测
    - ~100%
- 组件测试
    - API
    - 测试为主，测试为辅的业务测试
    - ~50%
- 集成测试
    - API
    - 架构师或主设计师编写
    - 编排测试，不测试业务，主要测试组件装配协调情况
    - ~20%
- 系统测试
    - GUI
    - 系统架构师和技术负责人编写
    - 针对整个集成系统运行的自动化测试
    - ~10%
- 人工探索式测试
    - ~5%


## 时间管理
### 会议
- 认知
    - 会议是`必需`的
    - 会议`浪漫大量时间`
- 拒绝
    - 管理自己的时间，确保会议对工作有显著成效
- 离席
    - 觉得浪费时，找理由退出
- 开会准备
    - 提供议题、时间、所要取得的成效
    - 开会途中保证议程在范围内
- 立会
    - 问题
        - 昨天干了啥？
        - 今天打算干啥？
        - 遇到了什么问题？
    - 要求
        每人发言`不超过1分钟`
- 迭代计划会议
    - 控制时间
- 回顾和 Demo 会议
    - 推荐最后一天下班前45分钟
    - 20分钟回顾，25分钟演示
- 争论
    - 5分钟解决不了的争论，`用数据论证`

### 注意力点数
- 来源
    - 充足的睡眠！
- 辅助
    - 咖啡因，适量
- 恢复
    - 转移注意力，如散步、聊天、沉思
    - 运动：用肌肉注意力来改善

### 时间拆分
- 番茄工作法
    - 流程
        - 连续工作25分钟（保证注意力不转移）
        - 休息5分钟
        - 四个番茄时间后休息30分钟
    - 推荐
        - 番茄工作法图解：简单易行的时间管理方法

### 避免行为
- 优先级错乱
    - 试图通过借口优先处理某任务，来逃避真正紧急的任务
- 死胡同
    - 发觉后，及时止损
- 泥潭
    - 确保专业性


## 预估
### 正常对待预估
- 承诺
    - `必须完成！`
    - 不能实验的承诺也是`欺骗`，仅比明目张胆的欺骗好一点
- 预估
    - 预估= 概率分页
    - 墨菲定律
        - 可能出错的，那么就一定会出错
    - 暗示性承诺
- PERT
    - 解释
        - Program Evaluation and Review Technique
        - 计划评审技术
        - 1957年时，为支持美国海军的潜艇极地航行计划而设想实现
    - 使用
        - 参数
            - 乐观预估 O
                - 最快可能完成日期
            - 标称预估 N
                - 概率最高的完成日期
            - 悲观预估 P
                - 最晚可能完成日期
        - 计算
            - 期望完成时间 μ
                = (O+ 4N+ P)/ 6
                = μ1+ μ2+ μ3+ ...
            - 偏差可能性 σ
                = (P- O)/ 6
                = (σ1^2+ σ2^2+ ...)^(1/2)

- 预估任务
    - 德尔菲法
        - 一组人集合讨论某任务，预估完成时间，直至意见统一
    - 亮手指
        - 针对任务，讨论涉及点、复杂因素和实现
        - 各人预估0-5个手指的工作量（单位提前约定）
        - 若基本偏差值在二以内则通过
    - 规划扑克
        - 手扑克的形式来实现“亮手指”的功能
    - 关联预估
        - 将任务均写在卡片上，然后打散
        - 后逐一将任务卡由认定的工作量从左到右，从少到多排列
        - 若某卡片被移动多次，则抽出单独讨论

- 大数定律
    - 将任务拆分后，预估再合并累加


## 压力
### 避免
- 认真应对承诺
- 保持代码整洁
- 坚持你保持的纪律

### 应对压力
- 既然改变不了，就冷静下来，寻求最好的解决办法
- 和团队、主管沟通
    - 调整计划
    - 请求支援
- 寻求帮助，比如结对编程


## 协作
### 程序员与人
- 雇主
    - `注意力集中于雇主的需求`
    - `深刻理解业务目标`
        - 了解编写代码的业务价值
        - 了解企业从你工作中能获得的回报
- 程序员
    - 避免代码个体所有
    - 结对编程
        - 一起工作时效率最高的方式

### 结论
- 认知自己做程序员是为了避免过多交流
- 认知想做好，`更需要学会交流`


## 团队与项目
### 项目分配
- `不推荐！`

### 有凝聚力的团队
- 创建
    - 需要时间建立关系
    - 学习协作，了解彼此的癖好、强弱项
- 12人
    - 程序员* 7
    - 测试* 2
    - 分析师* 2
        - 为需求编写自动化验收测试
    - 项目经理* 1
- 发酵期
    - >= 6月
- 以团队优先
    - 保障凝聚力的形成
    - 默契配合，稳定顺利
    - 若出现紧急情况，团队侧重转移即可保证项目的顺利进行


## 辅导
### 学位教育
- 被动接受，你了解的只是别人的一部分；如果你幸运的话
- 多写多试

### 辅导
- 观看别人的代码，观察别人的编码习惯
- 主动请求别人的帮助
- 代码 Review

### 学徒期思考
- 医生、电工、画家等都有适应过程，但程序员为什么不需要、不关心？
- 把试错成本想得太低
- 观念上，对于技术层面的督导太过看淡

### 软件工程师各时期
- 大师
    - 丰富从业经验
    - 领导和协作多个团队
    - 设计师和架构师
- 熟练工
    - 学习如何卓越工作
    - 学习成为团队领导者
- 学习生
    - 在熟练工督导下工作，结对编程

### 追求技艺

## 工具
