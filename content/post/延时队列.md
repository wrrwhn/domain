
    

# 使用场景
- 超过半小时未支付的订单，自动取消
- 指定过期失效的优惠券
- 顺风车发车前一小时，短信提醒乘车人做好准备

# 技术方案
## 定期轮询

- 方案
    - 定期轮询数据库
- 优点
    - 实现简单
- 缺点
    - 效率低
    - 数据量大时，IO 占用率高

## DelayQueue

- 方案
    - 由 Delayed 提供过期时间
    - 由 PriorityQueue 实现排序 
    - 由 BlockingQueue 支持无办队列 
    - 检测队首元素，若超时处理，否则休眠至队首的预计过期时间
        - 除非插入新元素，直接插入至队首
    - Leader/Follower 模式减少资源的抢占（锁竞争/线程切换）
- 优点
    - 阻塞队列，使用简单

## Timer

- 方案
    - TimerTask 提供执行时间/间隔/执行内容等信息
    - TimerQueue 提供优先级队列功能
    - TimerThread 单进程执行任务
    - Timer 以添加任务至队列 
- 缺点
    - 单一线程，运行异常即中断
    - 依赖系统时间
    - 易受 GC 和线程执行时间影响


## ScheduledExecutorService

- 方案
    - 
- 优点
    - 
- 缺点
    - 
## Kafka.时间轮

- 方案
    - 
- 优点
    - 
- 缺点
    - 
## RabbitMQ

- 方案
    - 
- 优点
    - 
- 缺点
    - 
## Quartz

- 方案
    - 
- 优点
    - 
- 缺点
    - 
## Redis Zset

- 方案
    - 
- 优点
    - 
- 缺点
    - 
## JCronTab

- 方案
    - 
- 优点
    - 
- 缺点
    - 


# 产品
## 网易.Koala

- 方案
    - 
- 优点
    - 
- 缺点
    - 
## 阿里.SchedulerX

- 方案
    - 
- 优点
    - 
- 缺点
    - 
## 有赞.

- 方案
    - 
- 优点
    - 
- 缺点
    - 
## 

- 方案
    - 
- 优点
    - 
- 缺点
    - 

# 参考
- [你真的了解延时队列吗](https://juejin.im/post/5b5e52ecf265da0f716c3203)
- [延时任务队列的原理与实现总结](https://www.jianshu.com/p/a8c1458998aa)
- []()
- []()
- []()